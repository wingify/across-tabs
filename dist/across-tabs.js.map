{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3b250f80d9f276aed65b","webpack:///./src/index.js","webpack:///./src/parent.js","webpack:///./src/tab.js","webpack:///./src/utils/tab.js","webpack:///./src/enums/PostMessageEventNamesEnum.js","webpack:///./src/utils/array.js","webpack:///./src/enums/TabStatusEnum.js","webpack:///./src/enums/WarningTextEnum.js","webpack:///./src/vendor/uuid.js","webpack:///./src/utils/dom.js","webpack:///./src/event-listeners/postmessage.js","webpack:///./src/child.js"],"names":["AcrossTabs","Parent","Child","heartBeat","tab","config","heartBeatInterval","shouldInitImmediately","tabs","Tab","init","i","getAll","openedTabs","getOpened","length","window","clearInterval","removeClosedTabs","watchStatus","status","ref","closed","CLOSE","OPEN","onPollingCallback","setInterval","addInterval","newStatus","oldStatus","_remove","ev","onChildDisconnect","detail","enableElements","onHandshakeCallback","removeEventListener","onNewTab","addEventListener","customEventUnListener","onChildUnload","onbeforeunload","broadCastAll","PARENT_DISCONNECTED","enable","getClosed","closeAll","id","closeTab","msg","broadCastTo","Error","CONFIG_REQUIRED","url","URL_REQUIRED","create","startPollingTabs","addEventListeners","name","generate","open","windowFeatures","disable","newlyTabOpened","addNew","tabUtils","index","searchByKeyName","splice","_preProcessMessage","JSON","stringify","e","INVALID_JSON","indexOf","PARENT_COMMUNICATED","push","filter","close","isSiteInsideFrame","sendMessage","targetedTab","target","postMessage","top","PostMessageEventNamesEnum","LOADED","CUSTOM","ON_BEFORE_UNLOAD","HANDSHAKE_WITH_PARENT","arrayUtils","returnPreferenceEnum","INDEX","OBJECT","BOTH","data","key","value","returnPreference","obj","returnData","isNaN","parseInt","TabStatusEnum","WarningTextEnum","INVALID_DATA","UUID","rand","_getRandomInt","hex","_hexAligner","x","NaN","Math","random","_getIntAligner","radix","num","str","toString","z","prototype","hexString","domUtils","selector","ATOpenerElems","document","querySelectorAll","setAttribute","removeAttribute","PostMessageListener","_onLoad","dataToSend","tabInfo","split","parse","parentName","_onCustomMessage","event","CustomEvent","dispatchEvent","_onBeforeUnload","message","sessionStorageKey","handshakeExpiryLimit","tabName","tabId","tabParentName","sessionStorage","isSessionStorageSupported","getItem","dataReceived","setItem","storedData","_getData","_parseData","actualData","clearTimeout","timeout","onParentDisconnect","onCommunication","evt","_setData","sendMessageToParent","onInitialize","onParentCommunication","setTimeout","onHandShakeExpiry","opener","_isSessionStorage","addListeners","_restoreData","getTabInfo","setHandshakeExpiry","onReady"],"mappings":"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","file":"across-tabs.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"AcrossTabs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AcrossTabs\"] = factory();\n\telse\n\t\troot[\"AcrossTabs\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3b250f80d9f276aed65b\n **/","import Parent from './parent';\nimport Child from './child';\n\n/**\n * Expose Parent and Child modules on AcrossTabs Object\n * @type {Object}\n */\nconst AcrossTabs = {\n  Parent: Parent,\n  Child: Child\n};\n\nexport default AcrossTabs;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Tab from './tab';\n\nimport tabUtils from './utils/tab';\nimport domUtils from './utils/dom';\n\nimport TabStatusEnum from './enums/TabStatusEnum';\nimport WarningTextEnum from './enums/WarningTextEnum';\nimport PostMessageEventNamesEnum from './enums/PostMessageEventNamesEnum';\n\nimport PostMessageListener from './event-listeners/postmessage';\n\nlet heartBeat, tab;\n\n// Named Class expression\nclass Parent {\n  /**\n   * Involed when object is instantiated\n   * Set flags/variables and calls init method to attach event listeners\n   * @param  {Object} config - Refer API/docs for config keys\n   */\n  constructor(config) {\n    config = config || {};\n    if (typeof config.heartBeatInterval === 'undefined') {\n      config.heartBeatInterval = 500;\n    }\n    if (typeof config.shouldInitImmediately === 'undefined') {\n      config.shouldInitImmediately = true;\n    }\n\n    // reset tabs with every new Object\n    tabUtils.tabs = [];\n\n    this.Tab = Tab;\n    Object.assign(this, config);\n\n    if (this.shouldInitImmediately) {\n      this.init();\n    }\n  };\n\n  addInterval() {\n    let i,\n      tabs = tabUtils.getAll(),\n      openedTabs = tabUtils.getOpened();\n\n    // don't poll if all tabs are in CLOSED states\n    if (!openedTabs || !openedTabs.length) {\n      window.clearInterval(heartBeat); // stop the interval\n      heartBeat = null;\n      return false;\n    }\n\n    for (i = 0; i < tabs.length; i++) {\n      if (this.removeClosedTabs) {\n        this.watchStatus(tabs[i]);\n      }\n      /**\n       * The check is required since tab would be removed when closed(in case of `removeClosedTabs` flag),\n       * irrespective of heatbeat controller\n      */\n      if (tabs[i]) {\n        tabs[i].status = tabs[i].ref.closed ? TabStatusEnum.CLOSE : TabStatusEnum.OPEN;\n      }\n    }\n\n    // Call the user-defined callback after every polling operation is operted in a single run\n    if (this.onPollingCallback) {\n      this.onPollingCallback();\n    }\n  };\n\n  /**\n   * Poll all tabs for their status - OPENED / CLOSED\n   * An interval is created which checks for last and current status.\n   * There's a property on window i.e. `closed` which returns true for the closed window.\n   * And one can see `true` only in another tab when the tab was opened by the same `another` tab.\n   */\n  startPollingTabs() {\n    heartBeat = window.setInterval(() => this.addInterval(), this.heartBeatInterval);\n  };\n\n  /**\n   * Compare tab status - OPEN vs CLOSE\n   * @param  {Object} tab\n   */\n  watchStatus(tab) {\n    if (!tab) { return false; }\n    let newStatus = tab.ref.closed ? TabStatusEnum.CLOSE : TabStatusEnum.OPEN,\n      oldStatus = tab.status;\n\n    // If last and current status(inside a polling interval) are same, don't do anything\n    if (!newStatus || newStatus === oldStatus) { return false; }\n\n    // OPEN to CLOSE state\n    if (oldStatus === TabStatusEnum.OPEN && newStatus === TabStatusEnum.CLOSE) {\n      // remove tab from tabUtils\n      tabUtils._remove(tab);\n    }\n    // Change from CLOSE to OPEN state is never gonna happen ;)\n  };\n\n  /**\n   * Called when a child is refreshed/closed\n   * @param  {Object} ev - Event\n   */\n  onChildUnload(ev) {\n    if (this.onChildDisconnect) {\n      this.onChildDisconnect(ev.detail);\n    }\n  }\n\n  /**\n   * Enable link/btn, which got disabled on clicking.\n   * Note: works only when `data-tab-opener=\"heatmap\"` is used on the respective element\n   * @param  {Object} ev - Event\n   */\n  customEventUnListener(ev) {\n    this.enableElements();\n    if (this.onHandshakeCallback) {\n      this.onHandshakeCallback(ev.detail);\n    }\n  };\n\n  /**\n   * Attach postmessage, native and custom listeners to the window\n   */\n  addEventListeners() {\n    window.removeEventListener('message', PostMessageListener.onNewTab);\n    window.addEventListener('message', PostMessageListener.onNewTab);\n\n    window.removeEventListener('toggleElementDisabledAttribute', this.customEventUnListener);\n    window.addEventListener('toggleElementDisabledAttribute', ev => this.customEventUnListener(ev));\n\n    window.removeEventListener('onChildUnload', this.onChildUnload);\n    window.addEventListener('onChildUnload', ev => this.onChildUnload(ev));\n\n    // Let children tabs know when Parent is closed / refereshed.\n    window.onbeforeunload = () => {\n      tabUtils.broadCastAll(PostMessageEventNamesEnum.PARENT_DISCONNECTED);\n    };\n  };\n\n  /**\n   * API methods exposed for Public\n   *\n   * Re-enable the link/btn which got disabled on clicking\n   */\n  enableElements() {\n    domUtils.enable('data-tab-opener');\n  };\n\n  /**\n   * Return list of all tabs\n   * @return {Array}\n   */\n  getAllTabs() {\n    return tabUtils.getAll();\n  };\n\n  /**\n   * Return list of all OPENED tabs\n   * @return {Array}\n   */\n  getOpenedTabs() {\n    return tabUtils.getOpened();\n  };\n\n  /**\n   * Return list of all CLOSED tabs\n   * @return {Array}\n   */\n  getClosedTabs() {\n    return tabUtils.getClosed();\n  }\n\n  /**\n   * Close all tabs at once\n   * @return {Object}\n   */\n  closeAllTabs() {\n    return tabUtils.closeAll();\n  };\n\n  /**\n   * Close a specific tab\n   * @return {Object}\n   */\n  closeTab(id) {\n    return tabUtils.closeTab(id);\n  };\n\n  /**\n   * Send a postmessage to all OPENED tabs\n   * @return {Object}\n   */\n  broadCastAll(msg) {\n    return tabUtils.broadCastAll(msg);\n  }\n\n  /**\n   * Send a postmessage to a specific tab\n   * @return {Object}\n   */\n  broadCastTo(id, msg) {\n    return tabUtils.broadCastTo(id, msg);\n  }\n\n  /**\n   * Open a new tab. Config has to be passed with some required keys\n   * @return {Object} tab\n   */\n  openNewTab(config) {\n    if (!config) {\n      throw new Error(WarningTextEnum.CONFIG_REQUIRED);\n    }\n\n    let url = config.url;\n\n    if (!url) {\n      throw new Error(WarningTextEnum.URL_REQUIRED);\n    }\n\n    tab = new this.Tab();\n    tab.create(config);\n\n    // If polling is already there, don't set it again\n    if (!heartBeat) {\n      this.startPollingTabs();\n    }\n\n    return tab;\n\n  };\n\n  /**\n   * API methods exposed for Public ends here\n   **/\n\n  /**\n   * Invoked on object instantiation unless user pass a key to call it explicitly\n   */\n  init() {\n    this.addEventListeners();\n  };\n};\n\nexport default Parent;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/parent.js\n **/","import tabUtils from './utils/tab';\nimport UUID from './vendor/uuid';\nimport domUtils from './utils/dom';\n\n// Named Class expression\nclass Tab {\n  /**\n   * Invoked when the object is instantiated\n   */\n  constructor() {\n    // Set name of Parent tab if not already defined\n    window.name = window.name || 'PARENT_TAB';\n  };\n  /**\n   * Open a new tab\n   * @param  {Object} config - Refer API for config keys\n   * @return {Object} this\n   */\n  create(config) {\n    config = config || {};\n    Object.assign(this, config);\n    this.id = UUID.generate() || (tabUtils.tabs.length + 1);\n    this.status = 'open';\n    // Refere https://developer.mozilla.org/en-US/docs/Web/API/Window/open#Window_features for WindowFeatures\n    this.ref = window.open(\n      this.url,\n      '_blank',\n      config.windowFeatures);\n\n    domUtils.disable('data-tab-opener');\n\n    window.newlyTabOpened = {\n      id: this.id,\n      name: this.name,\n      ref: this.ref\n    };\n\n    // Push it to the list of tabs\n    tabUtils.addNew(this);\n\n     // Return reference for chaining purpose\n    return this;\n  };\n};\n\nexport default Tab;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tab.js\n **/","/**\n * A Tab utility file to deal with tab operations\n */\n\nimport PostMessageEventNamesEnum from '../enums/PostMessageEventNamesEnum';\nimport arrayUtils from './array';\nimport TabStatusEnum from '../enums/TabStatusEnum';\nimport WarningTextEnum from '../enums/WarningTextEnum';\n\nlet tabUtils = {\n  tabs: []\n};\n\n/**\n * Remove a tab from a list of all tabs.\n * This is required when users opts for removing the closed tabs from the list of tabs.\n * This can be done explictly by passing `removeClosedTabs` key while instantiating Parent.\n * @param  {Object} tab\n */\ntabUtils._remove = (tab) => {\n  let index;\n\n  index = arrayUtils.searchByKeyName(tabUtils.tabs, 'id', tab.id, 'index');\n  tabUtils.tabs.splice(index, 1);\n};\n\n/**\n * As explained in `event-listeners/postmessage.js` file,\n * the data received from postmessage API is further processed based on our convention\n * @param  {String} msg\n * @return {String} modified msg\n */\ntabUtils._preProcessMessage = (msg) => {\n  // make msg always an object to support JSON support\n  try {\n    msg = JSON.stringify(msg);\n  } catch (e) {\n    throw new Error(WarningTextEnum.INVALID_JSON);\n  }\n\n  if (msg.indexOf(PostMessageEventNamesEnum.PARENT_COMMUNICATED) === -1) {\n    msg = PostMessageEventNamesEnum.PARENT_COMMUNICATED + msg;\n  }\n\n  return msg;\n};\n/**\n * Add a new tab to the Array of tabs\n * @param  {Object} tab\n * @return {Object} - this\n */\ntabUtils.addNew = (tab) => {\n  tabUtils.tabs.push(tab);\n  return this;\n};\n/**\n * Filter out all the opened tabs\n * @return {Array} - only the opened tabs\n */\ntabUtils.getOpened = () => {\n  return tabUtils.tabs.filter(tab => tab.status === TabStatusEnum.OPEN);\n};\n/**\n * Filter out all the closed tabs\n * @return {Array} - only the closed tabs\n */\ntabUtils.getClosed = () => {\n  return tabUtils.tabs.filter(tab => tab.status === TabStatusEnum.CLOSE);\n};\n/**\n * To get list of all tabs(closed/opened).\n * Note: Closed tabs will not be returned if `removeClosedTabs` key is paased while instantiaiting Parent.\n * @return {Array} - list of all tabs\n */\ntabUtils.getAll = () => {\n  return tabUtils.tabs;\n};\n\n/**\n * Close a specific tab\n * @param  {String} id\n * @return {Object} this\n */\ntabUtils.closeTab = (id) => {\n  let tab = arrayUtils.searchByKeyName(tabUtils.tabs, 'id', id);\n\n  if (tab) {\n    tab.ref.close();\n    tab.status = TabStatusEnum.CLOSE;\n  }\n\n  return tabUtils;\n  // --tabUtils.tabs.length;\n};\n/**\n * Close all opened tabs using a native method `close` available on window.open reference.\n * @return {tabUtils} this\n */\ntabUtils.closeAll = () => {\n  let i;\n\n  for (i = 0; i < tabUtils.tabs.length; i++) {\n    // --tabUtils.tabs.length;\n    tabUtils.tabs[i].ref.close();\n    tabUtils.tabs[i].status = TabStatusEnum.CLOSE;\n  }\n\n  return tabUtils;\n};\n/**\n * Send a postmessage to every opened Child tab(excluding itself i.e Parent Tab)\n * @param  {String} msg\n * @param  {Boolean} isSiteInsideFrame\n */\ntabUtils.broadCastAll = (msg, isSiteInsideFrame) => {\n  let i, tabs = tabUtils.getOpened();\n\n  msg = tabUtils._preProcessMessage(msg);\n\n  for (i = 0; i < tabs.length; i++) {\n    tabUtils.sendMessage(tabs[i], msg, isSiteInsideFrame);\n  }\n\n  return tabUtils;\n};\n/**\n * Send a postmessage to a specific Child tab\n * @param  {String} id\n * @param  {String} msg\n * @param  {Boolean} isSiteInsideFrame\n */\ntabUtils.broadCastTo = (id, msg, isSiteInsideFrame) => {\n  let targetedTab,\n    tabs = tabUtils.getAll();\n\n  msg = tabUtils._preProcessMessage(msg);\n\n  targetedTab = arrayUtils.searchByKeyName(tabs, 'id', id); // TODO: tab.id\n  tabUtils.sendMessage(targetedTab, msg, isSiteInsideFrame);\n\n  return tabUtils;\n};\n\n/**\n * Send a postMessage to the desired window/frame\n * @param  {Object}  target\n * @param  {String}  msg\n * @param  {Boolean} isSiteInsideFrame\n */\ntabUtils.sendMessage = (target, msg, isSiteInsideFrame) => {\n  if (isSiteInsideFrame) {\n    target.ref[0].postMessage(msg, '*');\n  } else {\n    target.ref.top.postMessage(msg, '*');\n  }\n\n};\n\nexport default tabUtils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/tab.js\n **/","/**\n * Enum for different event names used for tab-communication\n * @type {Object}\n */\nconst PostMessageEventNamesEnum = {\n  LOADED: '__TAB__LOADED_EVENT__',\n  CUSTOM: '__TAB__CUSTOM_EVENT__',\n  ON_BEFORE_UNLOAD: '__TAB__ON_BEFORE_UNLOAD__',\n  PARENT_DISCONNECTED: '__PARENT_DISCONNECTED__',\n  HANDSHAKE_WITH_PARENT: '__HANDSHAKE_WITH_PARENT__',\n  PARENT_COMMUNICATED: '__PARENT_COMMUNICATED__'\n};\n\nexport default PostMessageEventNamesEnum;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/enums/PostMessageEventNamesEnum.js\n **/","let arrayUtils = {};\n\n/**\n * Different type of data needed after searching an item(Object) within data(Array of Objects).\n * 1. `INDEX` returns just the index at which the item was present\n * 2. `OBJECT` returns the matched object\n * 3. `BOTH` returns an object { obj: matched_object, index: index_found }\n */\nlet returnPreferenceEnum = {\n  INDEX: 'index',\n  OBJECT: 'object',\n  BOTH: 'both'\n};\n\n/**\n * Search for an item(Object) within a data-set(Array Of Objects)\n * @param  {Array of Objects} data\n * @param  {String} key - Unique key to search on the basis of\n * @param  {String} value - The matching criteria\n * @param  {String} returnPreference - what kind of output is needed\n * @return {Object}\n */\narrayUtils.searchByKeyName = (data, key, value, returnPreference) => {\n  if (!data || !key) { return false; }\n\n  returnPreference = returnPreference || returnPreferenceEnum[1]; // default to Object\n  let i, obj, returnData, index = -1;\n\n  for (i = 0; i < data.length; i++) {\n    obj = data[i];\n    // Number matching support\n    if (!isNaN(value) && parseInt(obj[key], 10) === parseInt(value, 10)) {\n      index = i;\n      break;\n    } else if (isNaN(value) && obj[key] === value) { // String exact matching support\n      index = i;\n      break;\n    }\n  }\n\n  if (index === -1) { // item not found\n    data[index] = {}; // for consistency\n  }\n\n  switch (returnPreference) {\n    case returnPreferenceEnum.INDEX:\n      returnData = index;\n      break;\n    case returnPreferenceEnum.BOTH:\n      returnData = {\n        obj: data[index],\n        index: index\n      };\n      break;\n    case returnPreferenceEnum.OBJECT:\n    default:\n      returnData = data[index];\n      break;\n  }\n\n  return returnData;\n\n};\n\nexport default arrayUtils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/array.js\n **/","/**\n * Enum for Tab status(still opened / closed) used for tab-communication\n * @type {Object}\n */\nconst TabStatusEnum = {\n  OPEN: 'open',\n  CLOSE: 'close'\n};\n\nexport default TabStatusEnum;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/enums/TabStatusEnum.js\n **/","/**\n * Enum for showing various warnings to suser when things done wrong\n * @type {Object}\n */\nconst WarningTextEnum = {\n  INVALID_JSON: 'Invalid JSON Object!',\n  INVALID_DATA: 'Some wrong message is being sent by Parent.',\n  CONFIG_REQUIRED: 'Configuration options required. Please read docs.',\n  URL_REQUIRED: 'Url is needed for creating and opening a new window/tab. Please read docs.'\n};\n\nexport default WarningTextEnum;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/enums/WarningTextEnum.js\n **/","/**\n * UUID.js: The RFC-compliant UUID generator for JavaScript.\n * ES6 port of only `generate` method of UUID by Varun Malhotra under MIT License\n *\n * @author  LiosK\n * @version v3.3.0\n * @license The MIT License: Copyright (c) 2010-2016 LiosK.\n */\n\n/** @constructor */\nlet UUID;\n\nUUID = (function () {\n  'use strict';\n\n  /** @lends UUID */\n  function UUID() {}\n\n  /**\n   * The simplest function to get an UUID string.\n   * @returns {string} A version 4 UUID string.\n   */\n  UUID.generate = function () {\n    let rand = UUID._getRandomInt, hex = UUID._hexAligner;\n\n    // [\"timeLow\", \"timeMid\", \"timeHiAndVersion\", \"clockSeqHiAndReserved\", \"clockSeqLow\", \"node\"]\n    return hex(rand(32), 8) +           // time_low\n      '-' +\n      hex(rand(16), 4) +                // time_mid\n      '-' +\n      hex(0x4000 | rand(12), 4) +       // time_hi_and_version\n      '-' +\n      hex(0x8000 | rand(14), 4) +       // clock_seq_hi_and_reserved clock_seq_low\n      '-' +\n      hex(rand(48), 12);                // node\n  };\n\n  /**\n   * Returns an unsigned x-bit random integer.\n   * @param {int} x A positive integer ranging from 0 to 53, inclusive.\n   * @returns {int} An unsigned x-bit random integer (0 <= f(x) < 2^x).\n   */\n  UUID._getRandomInt = function (x) {\n    if (x < 0) {\n      return NaN;\n    }\n    if (x <= 30) {\n      return (0 | Math.random() * (1 << x));\n    }\n    if (x <= 53) {\n      return (0 | Math.random() * (1 << 30)) +\n        (0 | Math.random() * (1 << x - 30)) * (1 << 30);\n    }\n\n    return NaN;\n  };\n\n  /**\n   * Returns a function that converts an integer to a zero-filled string.\n   * @param {int} radix\n   * @returns {function(num&#44; length)}\n   */\n  UUID._getIntAligner = function (radix) {\n    return function (num, length) {\n      let str = num.toString(radix), i = length - str.length, z = '0';\n\n      for (; i > 0; i >>>= 1, z += z) {\n        if (i & 1) {\n          str = z + str;\n        }\n      }\n      return str;\n    };\n  };\n\n  UUID._hexAligner = UUID._getIntAligner(16);\n\n  /**\n   * Returns UUID string representation.\n   * @returns {string} {@link UUID#hexString}.\n   */\n  UUID.prototype.toString = function () {\n    return this.hexString;\n  };\n\n  return UUID;\n\n})(UUID);\n\nexport default UUID;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/vendor/uuid.js\n **/","/**\n * This utility helps enabling/disabling the Link/Button on the Parent Tab.\n * As soon as, user clicks on link/btn to open a new tab, the link/btn gets disabled.\n * Once child communicates for the first time with the Parent, the link/btn is re-enabled to open up new tab.\n * This feature is toggleable and can be used explicitly putting a data attribute on the link/btn.\n *\n * <a href=\"/demo.html\" data-tab-opener=\"parent\" target=\"_blank\" on-click=\"parent.openNewTab(config)\">Open Tab</a>\n */\nlet domUtils = {\n  disable: (selector) => {\n    if (!selector) { return false; }\n\n    let i, ATOpenerElems = document.querySelectorAll('[' + selector + ']');\n\n    for (i = 0; i < ATOpenerElems.length; i++) {\n      ATOpenerElems[i].setAttribute('disabled', 'disabled');\n    }\n  },\n  enable: (selector) => {\n    if (!selector) { return false; }\n\n    let i, ATOpenerElems = document.querySelectorAll('[' + selector + ']');\n\n    for (i = 0; i < ATOpenerElems.length; i++) {\n      ATOpenerElems[i].removeAttribute('disabled');\n    }\n  }\n};\n\nexport default domUtils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/dom.js\n **/","import arrayUtils from '../utils/array';\nimport tabUtils from '../utils/tab';\nimport WarningTextEnum from '../enums/WarningTextEnum';\nimport PostMessageEventNamesEnum from '../enums/PostMessageEventNamesEnum';\n\nlet PostMessageListener = {};\n\n/*\n * Custom PostMessage Convetions Followed - Sending and Receieving data gracefully\n * -------------------------------------------------------------------------------\n *\n * 1. First convetion\n      Since data can be sent or receieved via postmessge API in the form of strings,\n      the library stores data as stringified JSON object and while reading it, parses the JSON stringified earlier.\n      This is easy to maintain and deal with data.\n\n * 2. Second Convetions\n      With every data, there's an associated message identifier.\n      A message identifier helps in knowing the intention of what event actually is for.\n      For eg: To send data after proper establishment from Child tab,\n      Parent tab acknowledges the connection by returning the true identity of the Child tab.\n      This is done via prepending the Event name i.e. HANDSHAKE_WTIH_PARENT\n\n      So the postmessage's message would like: `HANDSHAKE_WTIH_PARENT{\"id\": 123, \"name\": \"Hello World!\"}`.\n      So, while reading the message, it has to be first checked up with the defined event names\n      and then after successful match, the message is split using the Event-name as a delimiter.\n      The first entry if the event name and the second one is the actual data.\n *\n */\n\n/**\n * OnLoad Event - it serves as an communication establishment source from Child tab\n */\nPostMessageListener._onLoad = (data) => {\n  let tabs,\n    dataToSend,\n    tabInfo = data.split(PostMessageEventNamesEnum.LOADED)[1];\n\n  // Child was opened but parent got refereshed, opened a tab i.e.\n  // last opened tab will get refreshed(browser behavior). WOW! Handle this now.\n  if (tabInfo) {\n    try {\n      tabInfo = JSON.parse(tabInfo);\n      // If Child knows its UUID, means Parent was refreshed and Child did not\n      if (tabInfo.id) {\n        tabs = tabUtils.getAll();\n        if (tabs.length) {\n          window.newlyTabOpened = tabs[tabs.length - 1];\n          window.newlyTabOpened.id = tabInfo.id;\n          window.newlyTabOpened.name = tabInfo.name;\n        }\n      }\n    } catch (e) {\n      throw new Error(WarningTextEnum.INVALID_JSON);\n    }\n  }\n\n  if (window.newlyTabOpened) {\n    try {\n      dataToSend = PostMessageEventNamesEnum.HANDSHAKE_WITH_PARENT;\n      dataToSend += JSON.stringify({\n        id: window.newlyTabOpened.id,\n        name: window.newlyTabOpened.name,\n        parentName: window.name\n      });\n      tabUtils.sendMessage(window.newlyTabOpened, dataToSend, tabInfo.isSiteInsideFrame);\n    } catch (e) {\n      throw new Error(WarningTextEnum.INVALID_JSON);\n    }\n  }\n};\n\n/**\n * onCustomMessage Event - Any sort of custom message by child is treated here\n * @param  {Object} data\n *\n * The method fires an event to notify Parent regarding Child's behavior\n */\nPostMessageListener._onCustomMessage = (data) => {\n  let tabInfo = data.split(PostMessageEventNamesEnum.CUSTOM)[1];\n\n  try {\n    tabInfo = JSON.parse(tabInfo);\n  } catch (e) {\n    throw new Error(WarningTextEnum.INVALID_JSON);\n  }\n\n  // CustomEvent is not supported in IE and so does this library\n  let event = new CustomEvent('toggleElementDisabledAttribute', {'detail': tabInfo});\n\n  window.dispatchEvent(event);\n  window.newlyTabOpened = null;\n};\n\n/**\n * onBeforeUnload Event - Tells parent that either Child tab was closed or refreshed.\n * Child uses native `ON_BEFORE_UNLOAD` method to notify Parent.\n *\n * It sets the newlyTabOpened variable accordingly\n *\n * @param  {Object} data\n */\nPostMessageListener._onBeforeUnload = (data) => {\n  let tabs, tabInfo = data.split(PostMessageEventNamesEnum.ON_BEFORE_UNLOAD)[1];\n\n  try {\n    tabInfo = JSON.parse(tabInfo);\n  } catch (e) {\n    throw new Error(WarningTextEnum.INVALID_JSON);\n  }\n\n  if (tabUtils.tabs.length) {\n    tabs = tabUtils.getAll();\n    window.newlyTabOpened = arrayUtils.searchByKeyName(tabs, 'id', tabInfo.id) || window.newlyTabOpened;\n  }\n\n  // CustomEvent is not supported in IE and so does this library\n  let event = new CustomEvent('onChildUnload', {'detail': tabInfo});\n\n  window.dispatchEvent(event);\n};\n\n/**\n * onNewTab - It's the entry point for data processing after receiving any postmessage form any Child Tab\n * @param  {Object} message\n */\nPostMessageListener.onNewTab = (message) => {\n  let data = message.data;\n\n  /**\n   * Safe check - This happens when CHild Tab gets closed just after sending a message.\n   * No need to go further from this point.\n   * Tab status is automatically fetched using our polling mechanism written in `Parent.js` file.\n   */\n  if (!data || typeof data !== 'string' || !tabUtils.tabs.length) {\n    return false;\n  }\n\n  if (data.indexOf(PostMessageEventNamesEnum.LOADED) > -1) {\n    PostMessageListener._onLoad(data);\n  } else if (data.indexOf(PostMessageEventNamesEnum.CUSTOM) > -1) {\n    PostMessageListener._onCustomMessage(data);\n  } else if (data.indexOf(PostMessageEventNamesEnum.ON_BEFORE_UNLOAD) > -1) {\n    PostMessageListener._onBeforeUnload(data);\n  }\n};\n\nexport default PostMessageListener;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event-listeners/postmessage.js\n **/","import PostMessageEventNamesEnum from './enums/PostMessageEventNamesEnum';\nimport WarningTextEnum from './enums/WarningTextEnum';\n\n// Named Class expression\nclass Child {\n  /**\n   * Involed when object is instantiated\n   * Set flags/variables and calls init method to attach event listeners\n   * @param  {Object} config - Refer API/docs for config keys\n   */\n  constructor(config) {\n    this.sessionStorageKey = '__vwo_new_tab_info__';\n\n    if (!config) {\n      config = {};\n    }\n    if (typeof config.handshakeExpiryLimit === 'undefined') {\n      config.handshakeExpiryLimit = 5000;\n    }\n    if (typeof config.shouldInitImmediately === 'undefined') {\n      config.shouldInitImmediately = true;\n    }\n\n    this.tabName = window.name;\n    this.tabId = null;\n    this.tabParentName = null;\n\n    Object.assign(this, config);\n    this.config = config;\n\n    if (this.shouldInitImmediately) {\n      this.init();\n    }\n  };\n\n  /**\n   * Check is sessionStorage is present on window\n   * @return {Boolean} [description]\n   */\n  _isSessionStorage() {\n    if ('sessionStorage' in window && window.sessionStorage) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Get stored data from sessionStorage\n   * @return {Object} data\n   */\n  _getData() {\n    if (!this.isSessionStorageSupported) {\n      return false;\n    }\n\n    return window.sessionStorage.getItem(this.sessionStorageKey);\n  };\n\n  /**\n   * Set stored data from sessionStorage\n   * @return {Object} data\n   */\n  _setData(dataReceived) {\n    if (!this.isSessionStorageSupported) {\n      return false;\n    }\n\n    window.sessionStorage.setItem(this.sessionStorageKey, dataReceived);\n    return dataReceived;\n  };\n\n  /**\n   * Get stored data from sessionStorage and parse it\n   * @return {Object} data\n   */\n  _restoreData() {\n    if (!this.isSessionStorageSupported) {\n      return false;\n    }\n\n    if (this.isSessionStorageSupported) {\n      let storedData = this._getData();\n\n      this._parseData(storedData);\n    }\n  };\n\n  /**\n   * Parse data fetched from sessionStorage\n   * @param  {String} dataReceived\n   */\n  _parseData(dataReceived) {\n    let actualData;\n\n    // Expecting JSON data\n    try {\n      actualData = JSON.parse(dataReceived);\n      this.tabId = actualData && actualData.id;\n      this.tabParentName = actualData && actualData.parentName;\n    } catch (e) {\n      throw new Error(WarningTextEnum.INVALID_DATA);\n    };\n  };\n\n  /**\n   * The core of this file\n   * This method receives the postmessage from Parent\n   * after establishing a proper communication channel between Parent tab and Child tab.\n   * It removes the handshake timeout.\n   * Based on the type of postmessage event, it sets/parses or calls user defined callbacks\n   *\n   * @param  {String} message\n   */\n  onCommunication(message) {\n    let dataReceived,\n      data = message.data;\n\n    if (!data || typeof data !== 'string') {\n      return;\n    }\n\n    // cancel timeout\n    window.clearTimeout(this.timeout);\n\n    // When Parent tab gets closed or refereshed\n    if (data.indexOf(PostMessageEventNamesEnum.PARENT_DISCONNECTED) > -1) {\n      // Call user-defined `onParentDisconnect` callback when Parent tab gets closed or refereshed.\n      if (this.config.onParentDisconnect) {\n        this.config.onParentDisconnect();\n      }\n\n      // remove postMessage listener since no Parent is there to communicate with\n      window.removeEventListener('message', evt => this.onCommunication(evt));\n    }\n\n    /**\n     * When Parent sends an Acknowledgement to the Child's request of setting up a communication channel\n     * along with the tab's identity i.e. id, name and it's parent(itself) to the child tab.\n    */\n    if (data.indexOf(PostMessageEventNamesEnum.HANDSHAKE_WITH_PARENT) > -1) {\n      let msg;\n\n      dataReceived = data.split(PostMessageEventNamesEnum.HANDSHAKE_WITH_PARENT)[1];\n\n      // Set data to sessionStorage so that when page reloads it can directly read the past info till the session lives\n      this._setData(dataReceived);\n      this._parseData(dataReceived);\n\n      msg = PostMessageEventNamesEnum.CUSTOM + JSON.stringify({\n        id: this.tabId,\n        isSiteInsideFrame: this.config.isSiteInsideFrame\n      });\n      this.sendMessageToParent(msg);\n\n      if (this.config.onInitialize) {\n        this.config.onInitialize();\n      }\n    }\n\n    // Whenever Parent tab communicates once the communication channel is established\n    if (data.indexOf(PostMessageEventNamesEnum.PARENT_COMMUNICATED) > -1) {\n      dataReceived = data.split(PostMessageEventNamesEnum.PARENT_COMMUNICATED)[1];\n\n      try {\n        dataReceived = JSON.parse(dataReceived);\n      } catch (e) {\n        throw new Error(WarningTextEnum.INVALID_JSON);\n      }\n      // Call user-defined `onParentCommunication` callback when Parent sends a message to Parent tab\n      if (this.config.onParentCommunication) {\n        this.config.onParentCommunication(dataReceived);\n      }\n    }\n  };\n\n  /**\n   * Attach postmessage and onbeforeunload event listeners\n   */\n  addListeners() {\n    window.onbeforeunload = (evt) => {\n      let msg = PostMessageEventNamesEnum.ON_BEFORE_UNLOAD + JSON.stringify({\n        id: this.tabId,\n        isSiteInsideFrame: this.config.isSiteInsideFrame\n      });\n\n      this.sendMessageToParent(msg);\n    };\n\n    window.removeEventListener('message', evt => this.onCommunication(evt));\n    window.addEventListener('message', evt => this.onCommunication(evt));\n  };\n\n  /**\n   * Call a user-defined method `onHandShakeExpiry`\n   * if the Parent doesn't recieve a first handshake message within the configurable `handshakeExpiryLimit`\n   * @return {Function}\n   */\n  setHandshakeExpiry() {\n    return window.setTimeout(() => {\n      if (this.config.onHandShakeExpiry) {\n        this.config.onHandShakeExpiry();\n      }\n    }, this.handshakeExpiryLimit);\n  }\n\n  /**\n   * API starts here ->\n   *\n   * Send a postmessage to the corresponding Parent tab\n   * @param  {String} msg\n=   */\n  sendMessageToParent(msg) {\n    if (window.top.opener) {\n      window.top.opener.postMessage(msg, '*');\n    }\n  };\n\n  /**\n   * Get current Tab info i.e. id, name and parentName\n   * @return {Object} tab-info\n   */\n  getTabInfo() {\n    return {\n      id: this.tabId,\n      name: this.tabName,\n      parentName: this.tabParentName,\n      isSiteInsideFrame: this.config.isSiteInsideFrame\n    };\n  };\n  /**\n   * API ends here ->\n   */\n\n  /**\n   * Invoked on object instantiation unless user pass a key to call it explicitly\n   */\n  init() {\n    this.isSessionStorageSupported = this._isSessionStorage();\n    this.addListeners();\n    this._restoreData();\n    this.sendMessageToParent(PostMessageEventNamesEnum.LOADED + JSON.stringify(this.getTabInfo()));\n    this.timeout = this.setHandshakeExpiry();\n\n    if (this.config.onReady) {\n      this.config.onReady();\n    }\n  }\n};\n\nexport default Child;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/child.js\n **/"],"sourceRoot":""}